<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Just one more thing üíñ</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink:#f5a8c8;
      --card:#ffffff;
      --soft:#f2d6ff;
      --soft2:#e7c0ff;
      --textPink:#f19ac3;
    }
    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family:Poppins,system-ui;

      background-color: var(--pink);
      background-image: url("./images/main_index.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;

      overflow:hidden;
    }

    .overlay{
      position:fixed;
      inset:0;
      background: rgba(245,168,200,0.10);
      z-index:0;
      pointer-events:none;
    }

    /* Popup card */
    .card{
      position:relative;
      z-index:1;
      width:min(560px, 88vw);
      background: rgba(255,255,255,0.92);
      border-radius: 28px;
      padding: 44px 28px 30px;
      box-shadow: 0 26px 70px rgba(0,0,0,.18);
      text-align:center;
      backdrop-filter: blur(6px);

      animation: popIn .6s cubic-bezier(.16,.84,.24,1) both;
    }

    @keyframes popIn{
      from{ transform: translateY(18px) scale(.98); opacity:0; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    h1{
      margin:0 0 22px;
      font-size: clamp(26px, 3.6vw, 38px);
      font-weight: 800;
      color: var(--textPink);
      letter-spacing: .2px;
    }

    .btn{
      border:0;
      padding: 12px 34px;
      border-radius: 14px;
      background: linear-gradient(180deg, var(--soft), var(--soft2));
      color:#5b5b5b;
      font-weight: 700;
      font-size: 16px;
      cursor:pointer;
      box-shadow: 0 14px 26px rgba(0,0,0,.10);
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    .btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 18px 30px rgba(0,0,0,.14);
      filter: saturate(1.05);
    }
    .btn:active{
      transform: translateY(0);
      box-shadow: 0 12px 22px rgba(0,0,0,.10);
    }

    .dots{
      display:flex;
      justify-content:center;
      gap:10px;
      margin-top: 18px;
    }
    .dot{
      width:12px;height:12px;
      border-radius:50%;
      border:1.5px solid rgba(0,0,0,.35);
      background: transparent;
      opacity:.7;
    }
    .dot.active{
      background: #000;
      border-color:#000;
      opacity:1;
    }

    /* Slide transition */
    .fade{
      animation: fadeSwap .35s ease both;
    }
    @keyframes fadeSwap{
      from{ opacity:.2; transform: translateY(4px); }
      to{ opacity:1; transform: translateY(0); }
    }

    /* Music (kept running if started on index) */
    audio{ display:none; }
  </style>
</head>

<body>
  <div class="overlay"></div>

  <div class="card" id="card">
    <h1 id="title">It‚Äôs Your Special Day</h1>
    <button class="btn" id="action">‚ú® YAY ‚ú®</button>

    <div class="dots" aria-hidden="true">
      <span class="dot active" id="dot0"></span>
      <span class="dot" id="dot1"></span>
      <span class="dot" id="dot2"></span>
    </div>
  </div>

  <!-- Music continues on this page too -->
  <audio id="music" preload="auto" loop>
    <source src="song\HBD.mp3" type="audio/mpeg">
  </audio>

  <script>
    const slides = [
      { title: "It‚Äôs Your Special Day", btn: "‚ú® YAY ‚ú®" },
      { title: "Ready for your Surprise?", btn: "YES üëç" },
      { title: "Pakka Ready Na?", btn: "IRRI MAT KAR !!! üò≠" }
    ];

    let idx = 0;
    const card = document.getElementById("card");
    const title = document.getElementById("title");
    const action = document.getElementById("action");

    function setDots(i){
      for(let d=0; d<3; d++){
        document.getElementById("dot"+d).classList.toggle("active", d===i);
      }
    }

    function render(){
      // tiny transition
      card.classList.remove("fade");
      void card.offsetWidth;
      card.classList.add("fade");

      title.textContent = slides[idx].title;
      action.textContent = slides[idx].btn;
      setDots(idx);
    }

    action.addEventListener("click", () => {
      if(idx < slides.length - 1){
        idx++;
        render();
      } else {
        // ‚úÖ After last slide, go to your next surprise page
        // Change this to whatever you want (gift.html / gallery.html etc.)
        window.location.href = "gallery.html";
      }
    });

    // Init
    render();

    // Keep music going if started on index.html
    const music = document.getElementById("music");
    if (localStorage.getItem("birthdayMusic") === "play") {
      (async () => {
        try {
          music.volume = 0;
          await music.play();
          let v = 0;
          const fade = setInterval(() => {
            v += 0.04;
            music.volume = Math.min(v, 1);
            if (v >= 1) clearInterval(fade);
          }, 60);
        } catch(e) {
          // tap anywhere to resume if blocked
          document.addEventListener("click", async () => {
            try { await music.play(); } catch {}
          }, { once:true });
        }
      })();
    }
  </script>
</body>
</html>
